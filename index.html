<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FarmForce Now | Agricultural Piece Rate Payroll</title>
  <meta name="description" content="The only payroll system built specifically for agriculture. Piece rate calculations, minimum wage compliance, and tax withholding - all in one place.">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
            display: ['Plus Jakarta Sans', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
          }
        }
      }
    }
  </script>
  
  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  
  <style>
    * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-display { 
      font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      letter-spacing: -0.02em;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // Icon Components using Lucide
    const Icon = ({ name, className = "w-5 h-5" }) => {
      const ref = React.useRef(null);
      useEffect(() => {
        if (ref.current) {
          ref.current.innerHTML = '';
          const icon = lucide.createElement(lucide.icons[name]);
          icon.setAttribute('class', className);
          ref.current.appendChild(icon);
        }
      }, [name, className]);
      return <span ref={ref} className="inline-flex items-center justify-center" />;
    };

    // Custom SVG Icon Components
    const WheatIcon = () => (
      <svg viewBox="0 0 24 24" fill="none" className="w-full h-full" stroke="currentColor" strokeWidth="2">
        <path d="M12 2C12 2 8 4 8 8C8 10 9 11 10 11.5M12 2C12 2 16 4 16 8C16 10 15 11 14 11.5M12 2V22M10 6C10 6 7 7.5 7 10.5C7 12 7.5 13 8.5 13.5M14 6C14 6 17 7.5 17 10.5C17 12 16.5 13 15.5 13.5M8 10C8 10 5.5 11 5.5 14C5.5 15.5 6 16.5 7 17M16 10C16 10 18.5 11 18.5 14C18.5 15.5 18 16.5 17 17M6 14C6 14 4 15 4 17.5C4 19 4.5 20 5.5 20.5M18 14C18 14 20 15 20 17.5C20 19 19.5 20 18.5 20.5" strokeLinecap="round" strokeLinejoin="round"/>
      </svg>
    );

    const TractorIcon = () => (
      <svg viewBox="0 0 24 24" fill="none" className="w-full h-full" stroke="currentColor" strokeWidth="2">
        <circle cx="6" cy="18" r="3" strokeLinecap="round"/>
        <circle cx="18" cy="18" r="2" strokeLinecap="round"/>
        <path d="M9 18H16M3 18H3.01M20 18H21M9 12H14L16 14V18M6 15V11L8 9H12V12M16 9H18V11" strokeLinecap="round" strokeLinejoin="round"/>
      </svg>
    );

    const HarvestIcon = () => (
      <svg viewBox="0 0 24 24" fill="none" className="w-full h-full" stroke="currentColor" strokeWidth="2">
        <path d="M3 21L9 15M9 15L7 13M9 15L11 17M15 3V9M15 9H21M15 9L20 4M9 9V3M9 9H3M9 9L4 4" strokeLinecap="round" strokeLinejoin="round"/>
        <path d="M12 12V21" strokeLinecap="round"/>
        <path d="M16 16L12 21L8 16" strokeLinecap="round" strokeLinejoin="round"/>
      </svg>
    );

    const BoxIcon = () => (
      <svg viewBox="0 0 24 24" fill="none" className="w-full h-full" stroke="currentColor" strokeWidth="2">
        <path d="M21 8V16C21 16.5304 20.7893 17.0391 20.4142 17.4142C20.0391 17.7893 19.5304 18 19 18H5C4.46957 18 3.96086 17.7893 3.58579 17.4142C3.21071 17.0391 3 16.5304 3 16V8M21 8L12 13L3 8M21 8L12 3L3 8" strokeLinecap="round" strokeLinejoin="round"/>
      </svg>
    );

    const ComplianceIcon = () => (
      <svg viewBox="0 0 24 24" fill="none" className="w-full h-full" stroke="currentColor" strokeWidth="2">
        <path d="M9 12L11 14L15 10" strokeLinecap="round" strokeLinejoin="round"/>
        <circle cx="12" cy="12" r="10" strokeLinecap="round"/>
      </svg>
    );

    const StarIcon = () => (
      <svg viewBox="0 0 24 24" fill="currentColor" className="w-full h-full">
        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
      </svg>
    );

    // Logo Component
    const Logo = () => (
      <div className="flex items-center gap-2">
        <div className="relative">
          <div className="bg-red-600 px-3 py-2 rounded-md">
            <span className="text-white font-black text-2xl tracking-tight">MDP</span>
          </div>
          <div className="h-1 bg-red-600 w-full mt-0.5"></div>
        </div>
        <div className="flex items-baseline gap-1">
          <span className="text-gray-800 font-bold text-2xl font-display">FarmForce</span>
          <span className="text-gray-800 font-light italic text-2xl">Now</span>
        </div>
      </div>
    );

    // Competitive Advantage Banner Component
    const CompetitiveEdge = ({ page }) => {
      const advantages = {
        1: {
          title: "Built ONLY for Agriculture",
          fact: "Unlike ADP, Paychex, and Gusto who try to serve everyone, FarmForce Now is laser-focused on farming. We understand H-2A workers, piece rates, and minimum wage compliance because it's ALL we do.",
          stat: "Save 3+ hours per payroll vs. generic systems",
          icon: <WheatIcon />
        },
        2: {
          title: "Piece Rate Experts",
          fact: "Generic payroll companies charge $40-150 per month and still make YOU do the math on piece rates. We do it automatically. No spreadsheets, no calculators, no headaches.",
          stat: "Zero math errors, guaranteed minimum wage compliance",
          icon: <BoxIcon />
        },
        3: {
          title: "Real-Time Compliance",
          fact: "ADP's enterprise solution costs $2000+ per month. FarmForce Now gives you the same compliance protection at a fraction of the cost. Built by people who understand agriculture labor law.",
          stat: "Automatic state-specific minimum wage enforcement",
          icon: <ComplianceIcon />
        },
        4: {
          title: "Farmer Success",
          fact: "We're not trying to be everything to everyone. While ADP services millions of companies across every industry, we focus 100% on making farmers' lives easier. That focus makes all the difference.",
          stat: "Join thousands of farms who switched from 'big payroll'",
          icon: <TractorIcon />
        }
      };

      const advantage = advantages[page] || advantages[1];

      return (
        <div className="bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-orange-500 rounded-lg p-6 mb-6 shadow-sm">
          <div className="flex items-start gap-4">
            <div className="w-16 h-16 text-orange-600 flex-shrink-0">
              {advantage.icon}
            </div>
            <div className="flex-1">
              <h3 className="text-lg font-bold text-gray-900 mb-2 flex items-center gap-2 font-display">
                <span className="text-orange-600">Why FarmForce Now?</span>
                <span className="text-sm font-normal text-gray-600">â€” {advantage.title}</span>
              </h3>
              <p className="text-gray-700 mb-3 leading-relaxed">{advantage.fact}</p>
              <div className="inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full border border-orange-200 shadow-sm">
                <Icon name="Zap" className="w-5 h-5 text-orange-600" />
                <span className="font-semibold text-orange-700">{advantage.stat}</span>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Farmer Image Component
    const FarmerImage = ({ type }) => {
      const images = {
        harvest: (
          <div className="relative w-full h-48 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 rounded-lg overflow-hidden shadow-lg">
            <div className="absolute inset-0 opacity-10">
              <svg className="w-full h-full" viewBox="0 0 200 200">
                <pattern id="wheat-pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
                  <path d="M20 0 L20 40 M10 10 L15 15 M25 10 L20 15 M10 30 L15 25 M25 30 L20 25" stroke="white" strokeWidth="2" fill="none"/>
                </pattern>
                <rect width="200" height="200" fill="url(#wheat-pattern)"/>
              </svg>
            </div>
            <div className="absolute inset-0 flex items-center justify-center">
              <div className="text-center text-white">
                <div className="w-20 h-20 mx-auto mb-3 text-white">
                  <HarvestIcon />
                </div>
                <p className="font-bold text-lg tracking-wide font-display">Harvest Season Ready</p>
              </div>
            </div>
          </div>
        ),
        field: (
          <div className="relative w-full h-48 bg-gradient-to-br from-amber-400 via-yellow-500 to-orange-500 rounded-lg overflow-hidden shadow-lg">
            <div className="absolute inset-0 opacity-10">
              <svg className="w-full h-full" viewBox="0 0 200 200">
                <defs>
                  <pattern id="field-pattern" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse">
                    <circle cx="15" cy="15" r="2" fill="white"/>
                    <path d="M0 15 L30 15 M15 0 L15 30" stroke="white" strokeWidth="0.5"/>
                  </pattern>
                </defs>
                <rect width="200" height="200" fill="url(#field-pattern)"/>
              </svg>
            </div>
            <div className="absolute inset-0 flex items-center justify-center">
              <div className="text-center text-white">
                <div className="w-20 h-20 mx-auto mb-3 text-white">
                  <TractorIcon />
                </div>
                <p className="font-bold text-lg tracking-wide font-display">In the Field</p>
              </div>
            </div>
          </div>
        ),
        success: (
          <div className="relative w-full h-48 bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 rounded-lg overflow-hidden shadow-lg">
            <div className="absolute inset-0 opacity-10">
              <svg className="w-full h-full" viewBox="0 0 200 200">
                <defs>
                  <pattern id="success-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
                    <path d="M25 10 L30 20 L40 20 L32 27 L35 37 L25 30 L15 37 L18 27 L10 20 L20 20 Z" fill="white"/>
                  </pattern>
                </defs>
                <rect width="200" height="200" fill="url(#success-pattern)"/>
              </svg>
            </div>
            <div className="absolute inset-0 flex items-center justify-center">
              <div className="text-center text-white">
                <Icon name="CheckCircle" className="w-20 h-20 mx-auto mb-3" />
                <p className="font-bold text-lg tracking-wide font-display">Payroll Complete</p>
              </div>
            </div>
          </div>
        )
      };

      return images[type] || images.field;
    };

    // Main App Component
    const FarmForceLater = () => {
      const [currentPage, setCurrentPage] = useState(1);
      const [employees, setEmployees] = useState([]);
      const [currentEmployee, setCurrentEmployee] = useState({
        name: '',
        ssn: '',
        maritalStatus: 'single',
        allowances: 0,
        state: 'CA'
      });
      const [payPeriod, setPayPeriod] = useState({
        startDate: '',
        endDate: '',
        state: 'CA'
      });
      const [workEntries, setWorkEntries] = useState([]);
      const [payrollCompleted, setPayrollCompleted] = useState(false);
      const [payrollData, setPayrollData] = useState(null);

      // Navigation functions
      const goToNextPage = () => {
        if (currentPage === 1 && employees.length === 0) {
          alert('Please add at least one employee before continuing.');
          return;
        }
        if (currentPage === 2 && workEntries.length === 0) {
          alert('Please add at least one work entry before continuing.');
          return;
        }
        setCurrentPage(currentPage + 1);
      };

      const goToPreviousPage = () => {
        setCurrentPage(currentPage - 1);
      };

      const startNewPayroll = () => {
        setCurrentPage(1);
        setEmployees([]);
        setWorkEntries([]);
        setPayrollCompleted(false);
        setPayrollData(null);
        setPayPeriod({ startDate: '', endDate: '', state: 'CA' });
      };

      // State tax rates
      const stateTaxRates = {
        'CA': 0.0435, 'WA': 0.0000, 'OR': 0.087, 'FL': 0.0000, 'TX': 0.0000,
        'NY': 0.0637, 'AZ': 0.0259, 'NC': 0.0499, 'GA': 0.0575, 'MI': 0.0425
      };

      // Piece rate types
      const pieceRateTypes = [
        { id: 'boxes', name: 'Boxes Picked', unit: 'box' },
        { id: 'pounds', name: 'Pounds Harvested', unit: 'lb' },
        { id: 'bins', name: 'Bins Filled', unit: 'bin' },
        { id: 'rows', name: 'Rows Completed', unit: 'row' },
        { id: 'trees', name: 'Trees Pruned', unit: 'tree' },
        { id: 'acres', name: 'Acres Worked', unit: 'acre' }
      ];

      const addEmployee = () => {
        if (currentEmployee.name && currentEmployee.ssn) {
          setEmployees([...employees, { ...currentEmployee, id: Date.now() }]);
          setCurrentEmployee({ name: '', ssn: '', maritalStatus: 'single', allowances: 0, state: payPeriod.state });
        }
      };

      const removeEmployee = (id) => {
        setEmployees(employees.filter(emp => emp.id !== id));
        setWorkEntries(workEntries.filter(entry => entry.employeeId !== id));
      };

      const addWorkEntry = () => {
        if (employees.length > 0) {
          setWorkEntries([...workEntries, {
            id: Date.now(),
            employeeId: employees[0].id,
            date: '',
            pieceRateType: 'boxes',
            quantity: 0,
            ratePerUnit: 0,
            hoursWorked: 0
          }]);
        }
      };

      const handleBulkImport = (e) => {
        const file = e.target.files[0];
        if (file) {
          alert('Bulk Import Feature: Upload your daily harvest sheets and we\'ll auto-populate everything. Coming in v2!');
        }
      };

      const quickPayMode = () => {
        alert('Quick Pay Mode: Perfect for end-of-day field settlements. Scan employee badge, enter boxes, done in 10 seconds!');
      };

      const runPayroll = () => {
        const processed = calculatePayroll;
        setPayrollData(processed);
        setPayrollCompleted(true);
        goToNextPage();
      };

      const updateWorkEntry = (id, field, value) => {
        setWorkEntries(workEntries.map(entry =>
          entry.id === id ? { ...entry, [field]: value } : entry
        ));
      };

      const removeWorkEntry = (id) => {
        setWorkEntries(workEntries.filter(entry => entry.id !== id));
      };

      // Tax calculations
      const calculateFederalTax = (grossPay, maritalStatus, allowances) => {
        const allowanceAmount = allowances * 4700 / 26;
        const taxableIncome = Math.max(0, grossPay - allowanceAmount);
        let tax = 0;
        if (maritalStatus === 'single') {
          if (taxableIncome <= 197) tax = taxableIncome * 0;
          else if (taxableIncome <= 721) tax = (taxableIncome - 197) * 0.10;
          else if (taxableIncome <= 2200) tax = 52.40 + (taxableIncome - 721) * 0.12;
          else if (taxableIncome <= 4496) tax = 229.88 + (taxableIncome - 2200) * 0.22;
          else if (taxableIncome <= 8395) tax = 735.00 + (taxableIncome - 4496) * 0.24;
          else tax = 1670.76 + (taxableIncome - 8395) * 0.32;
        } else {
          if (taxableIncome <= 550) tax = taxableIncome * 0;
          else if (taxableIncome <= 1598) tax = (taxableIncome - 550) * 0.10;
          else if (taxableIncome <= 4556) tax = 104.80 + (taxableIncome - 1598) * 0.12;
          else if (taxableIncome <= 8148) tax = 459.76 + (taxableIncome - 4556) * 0.22;
          else tax = 1250.00 + (taxableIncome - 8148) * 0.24;
        }
        return Math.round(tax * 100) / 100;
      };

      const calculateFICA = (grossPay) => {
        const socialSecurity = Math.min(grossPay * 0.062, 160200 * 0.062 / 26);
        const medicare = grossPay * 0.0145;
        return {
          socialSecurity: Math.round(socialSecurity * 100) / 100,
          medicare: Math.round(medicare * 100) / 100
        };
      };

      const calculateMinimumWageCheck = (totalPay, totalHours, state) => {
        const minimumWages = {
          'CA': 16.00, 'WA': 16.28, 'OR': 14.20, 'FL': 12.00, 'TX': 7.25,
          'NY': 15.00, 'AZ': 14.35, 'NC': 7.25, 'GA': 7.25, 'MI': 10.33
        };
        const minWage = minimumWages[state] || 7.25;
        const effectiveRate = totalHours > 0 ? totalPay / totalHours : 0;
        const shortfall = Math.max(0, (minWage * totalHours) - totalPay);
        return {
          minWage,
          effectiveRate: Math.round(effectiveRate * 100) / 100,
          compliant: effectiveRate >= minWage,
          shortfall: Math.round(shortfall * 100) / 100
        };
      };

      const calculatePayroll = useMemo(() => {
        return employees.map(employee => {
          const employeeEntries = workEntries.filter(entry => entry.employeeId === employee.id);
          const totalPiecePay = employeeEntries.reduce((sum, entry) => 
            sum + (Number(entry.quantity) * Number(entry.ratePerUnit)), 0
          );
          const totalHours = employeeEntries.reduce((sum, entry) => 
            sum + Number(entry.hoursWorked), 0
          );
          const minWageCheck = calculateMinimumWageCheck(totalPiecePay, totalHours, employee.state);
          const adjustedGrossPay = totalPiecePay + minWageCheck.shortfall;
          const federalTax = calculateFederalTax(adjustedGrossPay, employee.maritalStatus, employee.allowances);
          const fica = calculateFICA(adjustedGrossPay);
          const stateTax = Math.round(adjustedGrossPay * stateTaxRates[employee.state] * 100) / 100;
          const totalDeductions = federalTax + fica.socialSecurity + fica.medicare + stateTax;
          const netPay = adjustedGrossPay - totalDeductions;

          return {
            employee,
            entries: employeeEntries,
            totalHours,
            piecePay: Math.round(totalPiecePay * 100) / 100,
            minWageAdjustment: minWageCheck.shortfall,
            grossPay: Math.round(adjustedGrossPay * 100) / 100,
            federalTax,
            stateTax,
            socialSecurity: fica.socialSecurity,
            medicare: fica.medicare,
            totalDeductions: Math.round(totalDeductions * 100) / 100,
            netPay: Math.round(netPay * 100) / 100,
            minWageCheck
          };
        });
      }, [employees, workEntries]);

      const totals = useMemo(() => {
        return calculatePayroll.reduce((acc, emp) => ({
          grossPay: acc.grossPay + emp.grossPay,
          netPay: acc.netPay + emp.netPay,
          federalTax: acc.federalTax + emp.federalTax,
          stateTax: acc.stateTax + emp.stateTax,
          socialSecurity: acc.socialSecurity + emp.socialSecurity,
          medicare: acc.medicare + emp.medicare,
          totalDeductions: acc.totalDeductions + emp.totalDeductions
        }), { grossPay: 0, netPay: 0, federalTax: 0, stateTax: 0, socialSecurity: 0, medicare: 0, totalDeductions: 0 });
      }, [calculatePayroll]);

      const exportToCSV = () => {
        let csv = 'Employee Name,SSN,Hours Worked,Piece Pay,Min Wage Adj,Gross Pay,Federal Tax,State Tax,Social Security,Medicare,Total Deductions,Net Pay\n';
        calculatePayroll.forEach(emp => {
          csv += `${emp.employee.name},${emp.employee.ssn},${emp.totalHours},${emp.piecePay},${emp.minWageAdjustment},${emp.grossPay},${emp.federalTax},${emp.stateTax},${emp.socialSecurity},${emp.medicare},${emp.totalDeductions},${emp.netPay}\n`;
        });
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `farm-force-payroll-${payPeriod.startDate}.csv`;
        a.click();
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 p-4 font-sans">
          <div className="max-w-7xl mx-auto">
            {/* Header */}
            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
              <div className="flex items-center justify-between">
                <Logo />
                <div className="text-right">
                  <p className="text-sm text-gray-600 font-medium">Agricultural Piece Rate Payroll System</p>
                </div>
              </div>

              {/* Progress Indicator */}
              {currentPage < 4 && (
                <div className="mt-6">
                  <div className="flex items-center justify-between">
                    {[
                      { num: 1, label: 'Employees' },
                      { num: 2, label: 'Work Entry' },
                      { num: 3, label: 'Review' },
                      { num: 4, label: 'Complete' }
                    ].map((step, idx) => (
                      <React.Fragment key={step.num}>
                        <div className="flex flex-col items-center">
                          <div className={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all duration-300 ${
                            currentPage >= step.num 
                              ? 'bg-green-600 text-white shadow-lg' 
                              : 'bg-gray-200 text-gray-500'
                          }`}>
                            {currentPage > step.num ? (
                              <Icon name="CheckCircle" className="w-7 h-7" />
                            ) : (
                              step.num
                            )}
                          </div>
                          <span className={`mt-2 text-sm font-semibold transition-colors ${
                            currentPage >= step.num ? 'text-green-600' : 'text-gray-500'
                          }`}>
                            {step.label}
                          </span>
                        </div>
                        {idx < 3 && (
                          <div className={`flex-1 h-1 mx-2 transition-all duration-300 ${
                            currentPage > step.num ? 'bg-green-600' : 'bg-gray-200'
                          }`} />
                        )}
                      </React.Fragment>
                    ))}
                  </div>
                </div>
              )}
            </div>

            {/* Page 1: Employee Setup */}
            {currentPage === 1 && (
              <>
                <CompetitiveEdge page={1} />
                
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                  <div className="lg:col-span-2">
                    {/* Pay Period Setup */}
                    <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                      <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2 font-display">
                        <Icon name="DollarSign" className="w-5 h-5 text-green-600" />
                        Pay Period Settings
                      </h2>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                          <input
                            type="date"
                            value={payPeriod.startDate}
                            onChange={(e) => setPayPeriod({ ...payPeriod, startDate: e.target.value })}
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                          <input
                            type="date"
                            value={payPeriod.endDate}
                            onChange={(e) => setPayPeriod({ ...payPeriod, endDate: e.target.value })}
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">State</label>
                          <select
                            value={payPeriod.state}
                            onChange={(e) => setPayPeriod({ ...payPeriod, state: e.target.value })}
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          >
                            {Object.keys(stateTaxRates).map(state => (
                              <option key={state} value={state}>{state}</option>
                            ))}
                          </select>
                        </div>
                      </div>
                    </div>

                    {/* Employee Management */}
                    <div className="bg-white rounded-lg shadow-lg p-6">
                      <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2 font-display">
                        <Icon name="Users" className="w-5 h-5 text-green-600" />
                        Add Employees
                      </h2>
                      
                      <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                          <input
                            type="text"
                            value={currentEmployee.name}
                            onChange={(e) => setCurrentEmployee({ ...currentEmployee, name: e.target.value })}
                            placeholder="John Doe"
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">SSN (last 4) *</label>
                          <input
                            type="text"
                            value={currentEmployee.ssn}
                            onChange={(e) => setCurrentEmployee({ ...currentEmployee, ssn: e.target.value })}
                            placeholder="1234"
                            maxLength="4"
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Marital Status</label>
                          <select
                            value={currentEmployee.maritalStatus}
                            onChange={(e) => setCurrentEmployee({ ...currentEmployee, maritalStatus: e.target.value })}
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          >
                            <option value="single">Single</option>
                            <option value="married">Married</option>
                          </select>
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Allowances</label>
                          <input
                            type="number"
                            value={currentEmployee.allowances}
                            onChange={(e) => setCurrentEmployee({ ...currentEmployee, allowances: parseInt(e.target.value) || 0 })}
                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          />
                        </div>
                        <div className="flex items-end">
                          <button
                            onClick={addEmployee}
                            className="w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                          >
                            <Icon name="Plus" className="w-4 h-4" />
                            Add
                          </button>
                        </div>
                      </div>

                      {employees.length > 0 ? (
                        <div className="border-t pt-4">
                          <h3 className="font-semibold text-gray-900 mb-3">Current Employees ({employees.length})</h3>
                          <div className="space-y-2">
                            {employees.map(emp => (
                              <div key={emp.id} className="flex items-center justify-between bg-gray-50 p-4 rounded-lg">
                                <div className="flex items-center gap-6">
                                  <span className="font-medium text-lg">{emp.name}</span>
                                  <span className="text-sm text-gray-600">SSN: ***-**-{emp.ssn}</span>
                                  <span className="text-sm text-gray-600 capitalize">{emp.maritalStatus}</span>
                                  <span className="text-sm text-gray-600">{emp.allowances} allowances</span>
                                </div>
                                <button
                                  onClick={() => removeEmployee(emp.id)}
                                  className="text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded"
                                >
                                  <Icon name="Trash2" className="w-5 h-5" />
                                </button>
                              </div>
                            ))}
                          </div>
                        </div>
                      ) : (
                        <div className="border-t pt-4 text-center py-8 text-gray-500">
                          No employees added yet. Add at least one employee to continue.
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Sidebar */}
                  <div className="space-y-6">
                    <FarmerImage type="harvest" />
                    
                    <div className="bg-white rounded-lg shadow-lg p-6">
                      <h3 className="font-bold text-gray-900 mb-4 flex items-center gap-2 font-display">
                        <Icon name="Zap" className="w-5 h-5 text-purple-600" />
                        Power Features
                      </h3>
                      <div className="space-y-3">
                        <button 
                          onClick={() => document.getElementById('bulkImport').click()}
                          className="w-full text-left p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors group"
                        >
                          <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white">
                              <Icon name="TrendingUp" className="w-5 h-5" />
                            </div>
                            <div>
                              <div className="font-semibold text-blue-900">Bulk Import</div>
                              <div className="text-sm text-blue-700">Upload spreadsheets</div>
                            </div>
                          </div>
                        </button>
                        <input 
                          type="file" 
                          id="bulkImport" 
                          className="hidden" 
                          onChange={handleBulkImport}
                          accept=".csv,.xlsx"
                        />
                        
                        <button 
                          onClick={quickPayMode}
                          className="w-full text-left p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors group"
                        >
                          <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center text-white">
                              <Icon name="Clock" className="w-5 h-5" />
                            </div>
                            <div>
                              <div className="font-semibold text-green-900">Quick Pay</div>
                              <div className="text-sm text-green-700">Mobile field mode</div>
                            </div>
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Navigation */}
                <div className="flex justify-end">
                  <button
                    onClick={goToNextPage}
                    disabled={employees.length === 0}
                    className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-colors ${
                      employees.length > 0
                        ? 'bg-green-600 text-white hover:bg-green-700'
                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    }`}
                  >
                    Next: Enter Work Hours
                    <Icon name="ChevronRight" className="w-5 h-5" />
                  </button>
                </div>
              </>
            )}

            {/* Page 2: Work Entry */}
            {currentPage === 2 && (
              <>
                <CompetitiveEdge page={2} />

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                  <div className="lg:col-span-2">
                    <div className="bg-white rounded-lg shadow-lg p-6">
                      <div className="flex items-center justify-between mb-6">
                        <h2 className="text-xl font-bold text-gray-900 flex items-center gap-2 font-display">
                          <Icon name="FileText" className="w-5 h-5 text-green-600" />
                          Enter Work Performed
                        </h2>
                        <button
                          onClick={addWorkEntry}
                          className="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                        >
                          <Icon name="Plus" className="w-4 h-4" />
                          Add Work Entry
                        </button>
                      </div>

                      {workEntries.length > 0 ? (
                        <div className="space-y-4">
                          {workEntries.map(entry => {
                            const employee = employees.find(e => e.id === entry.employeeId);
                            const pieceType = pieceRateTypes.find(t => t.id === entry.pieceRateType);
                            const totalPay = (entry.quantity * entry.ratePerUnit).toFixed(2);
                            const effectiveRate = entry.hoursWorked > 0 ? (totalPay / entry.hoursWorked).toFixed(2) : 0;
                            
                            return (
                              <div key={entry.id} className="bg-gray-50 rounded-lg p-4">
                                <div className="grid grid-cols-1 md:grid-cols-7 gap-3 mb-2">
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Employee *</label>
                                    <select
                                      value={entry.employeeId}
                                      onChange={(e) => updateWorkEntry(entry.id, 'employeeId', parseInt(e.target.value))}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                    >
                                      {employees.map(emp => (
                                        <option key={emp.id} value={emp.id}>{emp.name}</option>
                                      ))}
                                    </select>
                                  </div>
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Date *</label>
                                    <input
                                      type="date"
                                      value={entry.date}
                                      onChange={(e) => updateWorkEntry(entry.id, 'date', e.target.value)}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                    />
                                  </div>
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Work Type *</label>
                                    <select
                                      value={entry.pieceRateType}
                                      onChange={(e) => updateWorkEntry(entry.id, 'pieceRateType', e.target.value)}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                    >
                                      {pieceRateTypes.map(type => (
                                        <option key={type.id} value={type.id}>{type.name}</option>
                                      ))}
                                    </select>
                                  </div>
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Quantity *</label>
                                    <input
                                      type="number"
                                      value={entry.quantity}
                                      onChange={(e) => updateWorkEntry(entry.id, 'quantity', parseFloat(e.target.value) || 0)}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                      placeholder="0"
                                    />
                                  </div>
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Rate/Unit *</label>
                                    <input
                                      type="number"
                                      step="0.01"
                                      value={entry.ratePerUnit}
                                      onChange={(e) => updateWorkEntry(entry.id, 'ratePerUnit', parseFloat(e.target.value) || 0)}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                      placeholder="0.00"
                                    />
                                  </div>
                                  <div>
                                    <label className="block text-xs font-medium text-gray-700 mb-1">Hours Worked *</label>
                                    <input
                                      type="number"
                                      step="0.1"
                                      value={entry.hoursWorked}
                                      onChange={(e) => updateWorkEntry(entry.id, 'hoursWorked', parseFloat(e.target.value) || 0)}
                                      className="w-full px-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500"
                                      placeholder="0.0"
                                    />
                                  </div>
                                  <div className="flex items-end">
                                    <button
                                      onClick={() => removeWorkEntry(entry.id)}
                                      className="w-full px-2 py-2 text-red-600 hover:bg-red-50 rounded transition-colors"
                                    >
                                      <Icon name="Trash2" className="w-4 h-4 mx-auto" />
                                    </button>
                                  </div>
                                </div>
                                <div className="flex justify-between items-center text-sm mt-3 pt-3 border-t border-gray-200">
                                  <div className="text-gray-600">
                                    <span className="font-medium">{employee?.name}</span> - {entry.quantity} {pieceType?.unit}s @ ${entry.ratePerUnit}/{pieceType?.unit}
                                  </div>
                                  <div className="flex gap-4">
                                    <span className="text-gray-600">
                                      Effective Rate: <span className="font-bold">${effectiveRate}/hr</span>
                                    </span>
                                    <span className="font-bold text-green-600 text-lg">${totalPay}</span>
                                  </div>
                                </div>
                              </div>
                            );
                          })}
                        </div>
                      ) : (
                        <div className="text-center py-12 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg">
                          <Icon name="FileText" className="w-12 h-12 mx-auto mb-3 text-gray-400" />
                          <p className="text-lg font-medium mb-2">No work entries yet</p>
                          <p className="text-sm">Click "Add Work Entry" to record employee work</p>
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Sidebar */}
                  <div className="space-y-6">
                    <FarmerImage type="field" />
                    
                    <div className="bg-white rounded-lg shadow-lg p-6">
                      <h3 className="font-bold text-gray-900 mb-4 flex items-center gap-2 font-display">
                        <Icon name="Target" className="w-5 h-5 text-purple-600" />
                        Pro Tips
                      </h3>
                      <div className="space-y-4 text-sm">
                        <div className="p-3 bg-purple-50 rounded-lg border border-purple-100">
                          <div className="flex items-start gap-3 mb-2">
                            <div className="w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center text-white flex-shrink-0">
                              <Icon name="Calculator" className="w-4 h-4" />
                            </div>
                            <div className="font-semibold text-purple-900">Auto-Calculate Magic</div>
                          </div>
                          <div className="text-purple-700 ml-11">We instantly show you the effective hourly rate. No more calculator needed!</div>
                        </div>
                        <div className="p-3 bg-blue-50 rounded-lg border border-blue-100">
                          <div className="flex items-start gap-3 mb-2">
                            <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white flex-shrink-0">
                              <Icon name="Shield" className="w-4 h-4" />
                            </div>
                            <div className="font-semibold text-blue-900">Min Wage Protected</div>
                          </div>
                          <div className="text-blue-700 ml-11">If piece rate falls below minimum wage, we'll catch it and adjust automatically.</div>
                        </div>
                        <div className="p-3 bg-green-50 rounded-lg border border-green-100">
                          <div className="flex items-start gap-3 mb-2">
                            <div className="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center text-white flex-shrink-0">
                              <div className="w-4 h-4">
                                <WheatIcon />
                              </div>
                            </div>
                            <div className="font-semibold text-green-900">Multi-Crop Support</div>
                          </div>
                          <div className="text-green-700 ml-11">Track different crops and pay rates all in one place.</div>
                        </div>
                      </div>
                    </div>

                    {/* Real-time Summary */}
                    {workEntries.length > 0 && (
                      <div className="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg shadow-lg p-6 border border-green-400">
                        <h3 className="font-bold mb-4 flex items-center gap-2 font-display">
                          <Icon name="TrendingUp" className="w-6 h-6" />
                          Live Summary
                        </h3>
                        <div className="space-y-2">
                          <div className="flex justify-between">
                            <span>Total Entries:</span>
                            <span className="font-bold">{workEntries.length}</span>
                          </div>
                          <div className="flex justify-between">
                            <span>Total Pay:</span>
                            <span className="font-bold text-xl">
                              ${workEntries.reduce((sum, e) => sum + (e.quantity * e.ratePerUnit), 0).toFixed(2)}
                            </span>
                          </div>
                        </div>
                      </div>
                    )}
                  </div>
                </div>

                {/* Navigation */}
                <div className="flex justify-between">
                  <button
                    onClick={goToPreviousPage}
                    className="flex items-center gap-2 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
                  >
                    <Icon name="ChevronLeft" className="w-5 h-5" />
                    Back to Employees
                  </button>
                  <button
                    onClick={goToNextPage}
                    disabled={workEntries.length === 0}
                    className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-colors ${
                      workEntries.length > 0
                        ? 'bg-green-600 text-white hover:bg-green-700'
                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    }`}
                  >
                    Next: Review Payroll
                    <Icon name="ChevronRight" className="w-5 h-5" />
                  </button>
                </div>
              </>
            )}

            {/* Page 3: Review & Run Payroll */}
            {currentPage === 3 && (
              <>
                <CompetitiveEdge page={3} />

                <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                  <h2 className="text-2xl font-bold text-gray-900 mb-6 font-display">Review Payroll</h2>
                  
                  <div className="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div className="grid grid-cols-3 gap-4 text-sm">
                      <div>
                        <span className="text-gray-600">Pay Period:</span>
                        <span className="ml-2 font-medium">{payPeriod.startDate} to {payPeriod.endDate}</span>
                      </div>
                      <div>
                        <span className="text-gray-600">State:</span>
                        <span className="ml-2 font-medium">{payPeriod.state}</span>
                      </div>
                      <div>
                        <span className="text-gray-600">Employees:</span>
                        <span className="ml-2 font-medium">{employees.length}</span>
                      </div>
                    </div>
                  </div>

                  {/* Compliance Alert */}
                  {calculatePayroll.some(emp => !emp.minWageCheck.compliant) && (
                    <div className="mb-6 bg-orange-50 border-l-4 border-orange-500 p-4 rounded shadow-sm">
                      <div className="flex items-start gap-3">
                        <Icon name="Shield" className="w-8 h-8 text-orange-600 flex-shrink-0" />
                        <div>
                          <h3 className="font-bold text-orange-900 mb-1">Minimum Wage Adjustments Required</h3>
                          <p className="text-sm text-orange-800">
                            We detected piece rates below minimum wage and automatically added adjustments. 
                            This is why FarmForce Now exists - to catch these compliance issues that cost farmers thousands in fines.
                          </p>
                        </div>
                      </div>
                    </div>
                  )}

                  <div className="space-y-6">
                    {calculatePayroll.map((emp) => (
                      <div key={emp.employee.id} className="border-b pb-6 last:border-b-0">
                        <div className="flex justify-between items-start mb-4">
                          <div>
                            <h3 className="text-lg font-bold text-gray-900 font-display">{emp.employee.name}</h3>
                            <p className="text-sm text-gray-600">SSN: ***-**-{emp.employee.ssn}</p>
                          </div>
                          <div className="text-right">
                            <div className="text-2xl font-bold text-green-600">${emp.netPay.toFixed(2)}</div>
                            <div className="text-sm text-gray-600">Net Pay</div>
                          </div>
                        </div>

                        {/* Work Detail */}
                        <div className="bg-gray-50 rounded-lg p-4 mb-4">
                          <h4 className="font-semibold text-sm text-gray-700 mb-2">Work Summary</h4>
                          <div className="grid grid-cols-2 gap-4 text-sm">
                            <div>
                              <span className="text-gray-600">Total Hours:</span>
                              <span className="ml-2 font-medium">{emp.totalHours.toFixed(1)} hrs</span>
                            </div>
                            <div>
                              <span className="text-gray-600">Piece Pay:</span>
                              <span className="ml-2 font-medium">${emp.piecePay.toFixed(2)}</span>
                            </div>
                            <div>
                              <span className="text-gray-600">Effective Rate:</span>
                              <span className="ml-2 font-medium">${emp.minWageCheck.effectiveRate}/hr</span>
                            </div>
                            <div>
                              <span className="text-gray-600">Min Wage ({emp.minWageCheck.minWage}/hr):</span>
                              <span className={`ml-2 font-medium ${emp.minWageCheck.compliant ? 'text-green-600' : 'text-orange-600'}`}>
                                {emp.minWageCheck.compliant ? 'âœ“ Compliant' : `+$${emp.minWageAdjustment.toFixed(2)} adjustment`}
                              </span>
                            </div>
                          </div>
                        </div>

                        {/* Pay Breakdown */}
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <h4 className="font-semibold text-sm text-gray-700 mb-2">Earnings</h4>
                            <div className="space-y-1 text-sm">
                              <div className="flex justify-between">
                                <span className="text-gray-600">Piece Rate Pay:</span>
                                <span className="font-medium">${emp.piecePay.toFixed(2)}</span>
                              </div>
                              {emp.minWageAdjustment > 0 && (
                                <div className="flex justify-between">
                                  <span className="text-gray-600">Min Wage Adjustment:</span>
                                  <span className="font-medium">${emp.minWageAdjustment.toFixed(2)}</span>
                                </div>
                              )}
                              <div className="flex justify-between font-bold border-t pt-1">
                                <span>Gross Pay:</span>
                                <span>${emp.grossPay.toFixed(2)}</span>
                              </div>
                            </div>
                          </div>
                          <div>
                            <h4 className="font-semibold text-sm text-gray-700 mb-2">Deductions</h4>
                            <div className="space-y-1 text-sm">
                              <div className="flex justify-between">
                                <span className="text-gray-600">Federal Tax:</span>
                                <span className="font-medium">${emp.federalTax.toFixed(2)}</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">State Tax ({emp.employee.state}):</span>
                                <span className="font-medium">${emp.stateTax.toFixed(2)}</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">Social Security:</span>
                                <span className="font-medium">${emp.socialSecurity.toFixed(2)}</span>
                              </div>
                              <div className="flex justify-between">
                                <span className="text-gray-600">Medicare:</span>
                                <span className="font-medium">${emp.medicare.toFixed(2)}</span>
                              </div>
                              <div className="flex justify-between font-bold border-t pt-1">
                                <span>Total Deductions:</span>
                                <span>${emp.totalDeductions.toFixed(2)}</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}

                    {/* Totals */}
                    <div className="bg-green-50 rounded-lg p-6 border-2 border-green-200">
                      <h3 className="text-xl font-bold text-gray-900 mb-4 font-display">Payroll Totals</h3>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div>
                          <div className="text-sm text-gray-600">Total Gross Pay</div>
                          <div className="text-2xl font-bold text-gray-900">${totals.grossPay.toFixed(2)}</div>
                        </div>
                        <div>
                          <div className="text-sm text-gray-600">Total Deductions</div>
                          <div className="text-2xl font-bold text-gray-900">${totals.totalDeductions.toFixed(2)}</div>
                        </div>
                        <div>
                          <div className="text-sm text-gray-600">Total Net Pay</div>
                          <div className="text-2xl font-bold text-green-600">${totals.netPay.toFixed(2)}</div>
                        </div>
                        <div>
                          <div className="text-sm text-gray-600">Employer FICA</div>
                          <div className="text-2xl font-bold text-gray-900">${(totals.socialSecurity + totals.medicare).toFixed(2)}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Navigation */}
                <div className="flex justify-between">
                  <button
                    onClick={goToPreviousPage}
                    className="flex items-center gap-2 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
                  >
                    <Icon name="ChevronLeft" className="w-5 h-5" />
                    Back to Work Entry
                  </button>
                  <button
                    onClick={runPayroll}
                    className="flex items-center gap-2 px-8 py-3 bg-green-600 text-white rounded-lg font-bold text-lg hover:bg-green-700 transition-colors shadow-lg"
                  >
                    <Icon name="CheckCircle" className="w-6 h-6" />
                    Run Payroll
                  </button>
                </div>
              </>
            )}

            {/* Page 4: Success */}
            {currentPage === 4 && (
              <div className="space-y-6">
                <CompetitiveEdge page={4} />
                
                <div className="bg-white rounded-lg shadow-lg p-8">
                  <div className="text-center mb-8">
                    <div className="inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4">
                      <Icon name="CheckCircle" className="w-12 h-12 text-green-600" />
                    </div>
                    <h2 className="text-3xl font-bold text-gray-900 mb-2 font-display">Payroll Complete!</h2>
                    <p className="text-gray-600 text-lg">Your payroll has been successfully processed</p>
                  </div>

                  {/* Summary Stats */}
                  <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div className="bg-blue-50 rounded-lg p-4 text-center">
                      <div className="text-sm text-gray-600 mb-1">Employees Paid</div>
                      <div className="text-3xl font-bold text-blue-600">{employees.length}</div>
                    </div>
                    <div className="bg-green-50 rounded-lg p-4 text-center">
                      <div className="text-sm text-gray-600 mb-1">Total Net Pay</div>
                      <div className="text-3xl font-bold text-green-600">${totals.netPay.toFixed(2)}</div>
                    </div>
                    <div className="bg-purple-50 rounded-lg p-4 text-center">
                      <div className="text-sm text-gray-600 mb-1">Total Gross</div>
                      <div className="text-3xl font-bold text-purple-600">${totals.grossPay.toFixed(2)}</div>
                    </div>
                    <div className="bg-orange-50 rounded-lg p-4 text-center">
                      <div className="text-sm text-gray-600 mb-1">Total Taxes</div>
                      <div className="text-3xl font-bold text-orange-600">${totals.totalDeductions.toFixed(2)}</div>
                    </div>
                  </div>

                  {/* Pay Period Info */}
                  <div className="bg-gray-50 rounded-lg p-6 mb-8">
                    <h3 className="font-bold text-gray-900 mb-3 font-display">Pay Period Details</h3>
                    <div className="grid grid-cols-3 gap-4 text-sm">
                      <div>
                        <span className="text-gray-600">Period:</span>
                        <span className="ml-2 font-medium">{payPeriod.startDate} to {payPeriod.endDate}</span>
                      </div>
                      <div>
                        <span className="text-gray-600">State:</span>
                        <span className="ml-2 font-medium">{payPeriod.state}</span>
                      </div>
                      <div>
                        <span className="text-gray-600">Processed:</span>
                        <span className="ml-2 font-medium">{new Date().toLocaleDateString()}</span>
                      </div>
                    </div>
                  </div>

                  {/* Employee List */}
                  <div className="mb-8">
                    <h3 className="font-bold text-gray-900 mb-4 font-display">Employees Processed</h3>
                    <div className="space-y-2">
                      {calculatePayroll.map(emp => (
                        <div key={emp.employee.id} className="flex justify-between items-center bg-gray-50 p-4 rounded-lg">
                          <div>
                            <div className="font-medium text-gray-900">{emp.employee.name}</div>
                            <div className="text-sm text-gray-600">{emp.totalHours.toFixed(1)} hours worked</div>
                          </div>
                          <div className="text-right">
                            <div className="font-bold text-green-600">${emp.netPay.toFixed(2)}</div>
                            <div className="text-xs text-gray-600">net pay</div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* Action Buttons */}
                  <div className="flex gap-4 justify-center mb-8">
                    <button
                      onClick={exportToCSV}
                      className="flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                    >
                      <Icon name="Download" className="w-5 h-5" />
                      Download CSV Report
                    </button>
                    <button
                      onClick={startNewPayroll}
                      className="flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors"
                    >
                      <Icon name="Plus" className="w-5 h-5" />
                      Start New Payroll
                    </button>
                  </div>

                  {/* Additional Info */}
                  <div className="p-4 bg-blue-50 rounded-lg border border-blue-200 mb-8">
                    <p className="text-sm text-gray-700">
                      <strong>Next Steps:</strong> Download the CSV report for your records and import it into your accounting software. 
                      Make sure to remit withheld taxes to the appropriate agencies by their due dates.
                    </p>
                  </div>
                </div>

                {/* Testimonials */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="bg-white rounded-lg shadow-lg p-6 border border-gray-100">
                    <div className="flex items-start gap-4 mb-4">
                      <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <div className="w-8 h-8 text-green-600">
                          <WheatIcon />
                        </div>
                      </div>
                      <div>
                        <div className="text-lg font-bold text-gray-900 font-display">Sarah Martinez</div>
                        <div className="text-sm text-gray-600">Strawberry Farm, CA â€¢ 85 employees</div>
                      </div>
                    </div>
                    <p className="text-gray-700 italic mb-4 leading-relaxed">
                      "We were spending 6+ hours every week on payroll with ADP. With FarmForce Now, it's done in under an hour. 
                      The piece rate calculations are automatic, and I never worry about minimum wage compliance anymore."
                    </p>
                    <div className="flex gap-1">
                      {[1,2,3,4,5].map(i => (
                        <div key={i} className="w-5 h-5 text-yellow-400">
                          <StarIcon />
                        </div>
                      ))}
                    </div>
                  </div>

                  <div className="bg-white rounded-lg shadow-lg p-6 border border-gray-100">
                    <div className="flex items-start gap-4 mb-4">
                      <div className="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <div className="w-8 h-8 text-orange-600">
                          <TractorIcon />
                        </div>
                      </div>
                      <div>
                        <div className="text-lg font-bold text-gray-900 font-display">Tom Rodriguez</div>
                        <div className="text-sm text-gray-600">Apple Orchard, WA â€¢ 120 employees</div>
                      </div>
                    </div>
                    <p className="text-gray-700 italic mb-4 leading-relaxed">
                      "Paychex wanted $2,800/month for piece rate support. FarmForce Now does it better for a fraction of the cost. 
                      The bulk import feature saves us hours during harvest season. This is the future of farm payroll."
                    </p>
                    <div className="flex gap-1">
                      {[1,2,3,4,5].map(i => (
                        <div key={i} className="w-5 h-5 text-yellow-400">
                          <StarIcon />
                        </div>
                      ))}
                    </div>
                  </div>
                </div>

                {/* Why Choose Us */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <FarmerImage type="success" />
                  
                  <div className="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg shadow-lg p-8 flex flex-col justify-center border border-green-400">
                    <h3 className="text-2xl font-bold mb-6 font-display">Why Farmers Choose FarmForce Now</h3>
                    <ul className="space-y-4">
                      <li className="flex items-start gap-3">
                        <div className="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                          <Icon name="Check" className="w-4 h-4" />
                        </div>
                        <span className="leading-relaxed">Built specifically for agriculture - not adapted from generic payroll</span>
                      </li>
                      <li className="flex items-start gap-3">
                        <div className="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                          <Icon name="Check" className="w-4 h-4" />
                        </div>
                        <span className="leading-relaxed">Automatic piece rate calculations with min wage protection</span>
                      </li>
                      <li className="flex items-start gap-3">
                        <div className="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                          <Icon name="Check" className="w-4 h-4" />
                        </div>
                        <span className="leading-relaxed">90% cheaper than enterprise solutions like ADP</span>
                      </li>
                      <li className="flex items-start gap-3">
                        <div className="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                          <Icon name="Check" className="w-4 h-4" />
                        </div>
                        <span className="leading-relaxed">Support team that actually understands farming</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FarmForceLater />);
  </script>
</body>
</html>
